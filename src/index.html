<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <title>WhispTune - Where melodies drift like the wind</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <script src="libs/jsmediatags.min.js"></script>
  </head>
  <body>
    <div class="background">
      <img src="" id="bg-img" />
    </div>

    <div class="container">
      <div class="player-img" style="position: relative">
        <img src="" class="active" id="cover" />
      </div>

      <h2 id="music-title"></h2>
      <h3 id="music-artist"></h3>

      <div class="player-progress" id="player-progress">
        <div class="progress" id="progress"></div>
        <div class="music-duration">
          <span id="current-time">0:00</span>
          <span id="duration">0:00</span>
        </div>
      </div>

      <div class="player-controls">
        <button id="shuffle-btn" aria-label="Shuffle">
          <img src="icons/shuffle-disabled.svg" id="shuffle-icon" />
        </button>
        <img src="icons/prev.svg" id="prev" class="control-icon" />
        <img src="icons/play.svg" id="play" class="control-icon play-button" />
        <img src="icons/next.svg" id="next" class="control-icon" />
        <button id="loop-shuffle-btn" aria-label="Loop">
          <img src="icons/repeat-disabled.svg" id="loop-icon" />
        </button>
      </div>
      <button class="video-button" id="add-folder-btn">
        <video class="button-video" autoplay loop muted playsinline>
          <source src="videos/addmusic.mp4" type="video/mp4" />
          Your browser does not support the video tag.
        </video>
        Add Music
      </button>

      <input type="checkbox" id="menu-toggle" />
      <label for="menu-toggle" class="toggle">
        <div class="bars" id="bar1"></div>
        <div class="bars" id="bar2"></div>
        <div class="bars" id="bar3"></div>
      </label>

      <div class="song-list-container">
        <ul id="song-list"></ul>
      </div>
      <div id="secret-burst" class="hidden"></div>
      <div id="secret-label" class="hidden">
        ✨ Whispering Gateway Activated
      </div>
      <div id="loop-burst" class="hidden"></div>
      <div id="fx-layer"></div>

      <!-- Toast for volume -->
      <div class="toast" id="volume-toast">
        <img
          src="icons/volume.svg"
          style="height: 26px; filter: invert(1); margin-right: 14px"
          alt="Volume"
        />
        <div class="volume-bar-bg">
          <div id="volume-bar"></div>
        </div>
      </div>
    </div>

    <!-- Global loader -->
    <div
      id="global-loader"
      class="loader hidden"
      aria-live="polite"
      aria-busy="true"
    >
      <div class="loader-vinyl">
        <div class="disc"></div>
        <div class="grooves"></div>
        <div class="label"></div>
        <div class="center-hole"></div>
        <div class="loader-arcs"></div>
        <div class="loader-notes">
          <span>♪</span>
          <span>♫</span>
          <span>♬</span>
        </div>
      </div>
      <div id="loader-text">Loading…</div>
    </div>

    <!-- Query Modal (hidden by default) -->
    <div
      id="query-modal"
      class="query-modal-overlay hidden"
      aria-modal="true"
      role="dialog"
    >
      <video class="query-modal-video" autoplay muted loop playsinline>
        <source src="videos/special.mp4" type="video/mp4" />
      </video>
      <div class="query-modal-content">
        <div class="query-modal-title">What would you like to play?</div>
        <input
          id="query-input"
          class="query-modal-input"
          type="text"
          placeholder="Search or paste a link (YouTube Music)"
        />
        <div class="query-modal-actions">
          <button id="query-cancel" class="btn-modal ghost">Cancel</button>
          <button id="query-ok" class="btn-modal primary">Play</button>
        </div>
      </div>
    </div>

    <script src="libs/anime-3.2.1/lib/anime.min.js"></script>

    <script type="module" src="whisptune.js"></script>
  </body>
</html>
